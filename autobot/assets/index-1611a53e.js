import{b as D,_ as W,a as k,j as Y,u as J,Z as ae,i as h,c as T,J as se,m as x,t as $,o as L,s as M,v as Q,a4 as le,N as O,n as P,f as g,h as A,a5 as oe,U as re,b6 as Z,e as ee,x as I,Q as ne,d as ie,ai as ce,al as R,I as K,l as F,a9 as ue,B as V,p as ve,a0 as fe,a1 as de,bv as me,r as pe,O as he,g as be,ad as ye,w as ge,bi as we}from"./index-80c046a1.js";import{B as Se,r as Ee,G as C}from"./el-scrollbar-8a15482a.js";const j=Symbol("scrollbarContextKey"),ze=D({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),_e="Thumb",He=k({__name:"thumb",props:ze,setup(s){const t=s,l=Y(j),o=J("scrollbar");l||ae(_e,"can not inject scrollbar context");const n=h(),c=h(),u=h({}),v=h(!1);let r=!1,b=!1,y=Z?document.onselectstart:null;const a=T(()=>Se[t.vertical?"vertical":"horizontal"]),i=T(()=>Ee({size:t.size,move:t.move,bar:a.value})),m=T(()=>n.value[a.value.offset]**2/l.wrapElement[a.value.scrollSize]/t.ratio/c.value[a.value.offset]),p=d=>{var S;if(d.stopPropagation(),d.ctrlKey||[1,2].includes(d.button))return;(S=window.getSelection())==null||S.removeAllRanges(),_(d);const H=d.currentTarget;H&&(u.value[a.value.axis]=H[a.value.offset]-(d[a.value.client]-H.getBoundingClientRect()[a.value.direction]))},z=d=>{if(!c.value||!n.value||!l.wrapElement)return;const S=Math.abs(d.target.getBoundingClientRect()[a.value.direction]-d[a.value.client]),H=c.value[a.value.offset]/2,N=(S-H)*100*m.value/n.value[a.value.offset];l.wrapElement[a.value.scroll]=N*l.wrapElement[a.value.scrollSize]/100},_=d=>{d.stopImmediatePropagation(),r=!0,document.addEventListener("mousemove",w),document.addEventListener("mouseup",f),y=document.onselectstart,document.onselectstart=()=>!1},w=d=>{if(!n.value||!c.value||r===!1)return;const S=u.value[a.value.axis];if(!S)return;const H=(n.value.getBoundingClientRect()[a.value.direction]-d[a.value.client])*-1,N=c.value[a.value.offset]-S,te=(H-N)*100*m.value/n.value[a.value.offset];l.wrapElement[a.value.scroll]=te*l.wrapElement[a.value.scrollSize]/100},f=()=>{r=!1,u.value[a.value.axis]=0,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",f),U(),b&&(v.value=!1)},e=()=>{b=!1,v.value=!!t.size},B=()=>{b=!0,v.value=r};se(()=>{U(),document.removeEventListener("mouseup",f)});const U=()=>{document.onselectstart!==y&&(document.onselectstart=y)};return x($(l,"scrollbarElement"),"mousemove",e),x($(l,"scrollbarElement"),"mouseleave",B),(d,S)=>(L(),M(re,{name:g(o).b("fade"),persisted:""},{default:Q(()=>[le(O("div",{ref_key:"instance",ref:n,class:P([g(o).e("bar"),g(o).is(g(a).key)]),onMousedown:z},[O("div",{ref_key:"thumb",ref:c,class:P(g(o).e("thumb")),style:A(g(i)),onMousedown:p},null,38)],34),[[oe,d.always||v.value]])]),_:1},8,["name"]))}});var q=W(He,[["__file","thumb.vue"]]);const Ce=D({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),Te=k({__name:"bar",props:Ce,setup(s,{expose:t}){const l=s,o=Y(j),n=h(0),c=h(0),u=h(""),v=h(""),r=h(1),b=h(1);return t({handleScroll:i=>{if(i){const m=i.offsetHeight-C,p=i.offsetWidth-C;c.value=i.scrollTop*100/m*r.value,n.value=i.scrollLeft*100/p*b.value}},update:()=>{const i=o==null?void 0:o.wrapElement;if(!i)return;const m=i.offsetHeight-C,p=i.offsetWidth-C,z=m**2/i.scrollHeight,_=p**2/i.scrollWidth,w=Math.max(z,l.minSize),f=Math.max(_,l.minSize);r.value=z/(m-z)/(w/(m-w)),b.value=_/(p-_)/(f/(p-f)),v.value=w+C<m?`${w}px`:"",u.value=f+C<p?`${f}px`:""}}),(i,m)=>(L(),ee(ne,null,[I(q,{move:n.value,ratio:b.value,size:u.value,always:i.always},null,8,["move","ratio","size","always"]),I(q,{move:c.value,ratio:r.value,size:v.value,vertical:"",always:i.always},null,8,["move","ratio","size","always"])],64))}});var Be=W(Te,[["__file","bar.vue"]]);const Re=D({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ie([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...ce(["ariaLabel","ariaOrientation"])}),Le={scroll:({scrollTop:s,scrollLeft:t})=>[s,t].every(R)},Pe="ElScrollbar",ke=k({name:Pe}),Ne=k({...ke,props:Re,emits:Le,setup(s,{expose:t,emit:l}){const o=s,n=J("scrollbar");let c,u;const v=h(),r=h(),b=h(),y=h(),a=T(()=>{const e={};return o.height&&(e.height=K(o.height)),o.maxHeight&&(e.maxHeight=K(o.maxHeight)),[o.wrapStyle,e]}),i=T(()=>[o.wrapClass,n.e("wrap"),{[n.em("wrap","hidden-default")]:!o.native}]),m=T(()=>[n.e("view"),o.viewClass]),p=()=>{var e;r.value&&((e=y.value)==null||e.handleScroll(r.value),l("scroll",{scrollTop:r.value.scrollTop,scrollLeft:r.value.scrollLeft}))};function z(e,B){ye(e)?r.value.scrollTo(e):R(e)&&R(B)&&r.value.scrollTo(e,B)}const _=e=>{R(e)&&(r.value.scrollTop=e)},w=e=>{R(e)&&(r.value.scrollLeft=e)},f=()=>{var e;(e=y.value)==null||e.update()};return F(()=>o.noresize,e=>{e?(c==null||c(),u==null||u()):({stop:c}=ue(b,f),u=x("resize",f))},{immediate:!0}),F(()=>[o.maxHeight,o.height],()=>{o.native||V(()=>{var e;f(),r.value&&((e=y.value)==null||e.handleScroll(r.value))})}),ve(j,fe({scrollbarElement:v,wrapElement:r})),de(()=>{o.native||V(()=>{f()})}),me(()=>f()),t({wrapRef:r,update:f,scrollTo:z,setScrollTop:_,setScrollLeft:w,handleScroll:p}),(e,B)=>(L(),ee("div",{ref_key:"scrollbarRef",ref:v,class:P(g(n).b())},[O("div",{ref_key:"wrapRef",ref:r,class:P(g(i)),style:A(g(a)),onScroll:p},[(L(),M(he(e.tag),{id:e.id,ref_key:"resizeRef",ref:b,class:P(g(m)),style:A(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:Q(()=>[pe(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),e.native?be("v-if",!0):(L(),M(Be,{key:0,ref_key:"barRef",ref:y,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}});var xe=W(Ne,[["__file","scrollbar.vue"]]);const Ae=ge(xe),E=new Map;let G;Z&&(document.addEventListener("mousedown",s=>G=s),document.addEventListener("mouseup",s=>{for(const t of E.values())for(const{documentHandler:l}of t)l(s,G)}));function X(s,t){let l=[];return Array.isArray(t.arg)?l=t.arg:we(t.arg)&&l.push(t.arg),function(o,n){const c=t.instance.popperRef,u=o.target,v=n==null?void 0:n.target,r=!t||!t.instance,b=!u||!v,y=s.contains(u)||s.contains(v),a=s===u,i=l.length&&l.some(p=>p==null?void 0:p.contains(u))||l.length&&l.includes(v),m=c&&(c.contains(u)||c.contains(v));r||b||y||a||i||m||t.value(o,n)}}const De={beforeMount(s,t){E.has(s)||E.set(s,[]),E.get(s).push({documentHandler:X(s,t),bindingFn:t.value})},updated(s,t){E.has(s)||E.set(s,[]);const l=E.get(s),o=l.findIndex(c=>c.bindingFn===t.oldValue),n={documentHandler:X(s,t),bindingFn:t.value};o>=0?l.splice(o,1,n):l.push(n)},unmounted(s){E.delete(s)}};export{De as C,Ae as E};
